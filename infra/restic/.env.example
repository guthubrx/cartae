# Restic Backup Configuration
# Session 81e - Backup & Disaster Recovery
# Copy to .env and fill in actual values

# ========================================
# Restic Repository Configuration
# ========================================

# Local repository path (mounted volume)
RESTIC_REPOSITORY=/backups/repo

# Restic encryption password (REQUIRED)
# Generate with: openssl rand -base64 32
RESTIC_PASSWORD=YOUR_STRONG_PASSWORD_HERE

# ========================================
# S3 Backend Configuration (Optional)
# ========================================

# Enable S3 backend by setting RESTIC_REPOSITORY to s3:https://...
# RESTIC_REPOSITORY=s3:https://s3.amazonaws.com/my-backup-bucket

# AWS credentials
# AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY
# AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY

# S3 endpoint (for S3-compatible storage like MinIO, Wasabi, etc.)
# RESTIC_S3_ENDPOINT=https://s3.example.com

# ========================================
# Backup Schedule & Retention
# ========================================

# Cron schedule (default: daily at 02:00 UTC)
BACKUP_SCHEDULE=0 2 * * *

# Retention policy
BACKUP_RETENTION_DAILY=7     # Keep 7 daily backups
BACKUP_RETENTION_WEEKLY=4    # Keep 4 weekly backups
BACKUP_RETENTION_MONTHLY=12  # Keep 12 monthly backups

# ========================================
# PostgreSQL Configuration
# ========================================

POSTGRES_HOST=cartae-database
POSTGRES_PORT=5432
POSTGRES_DB=cartae
POSTGRES_USER=cartae
POSTGRES_PASSWORD=YOUR_POSTGRES_PASSWORD

# ========================================
# Redis Configuration
# ========================================

REDIS_HOST=cartae-redis
REDIS_PORT=6379

# ========================================
# Monitoring Integration
# ========================================

# Prometheus Pushgateway (optional)
# PROMETHEUS_PUSHGATEWAY=http://prometheus-pushgateway:9091

# ========================================
# Backup Storage Path
# ========================================

# Local filesystem path for backup repository
# This directory will be mounted into the container
RESTIC_BACKUP_PATH=./backups

# ========================================
# Disaster Recovery Targets
# ========================================

# Recovery Time Objective (RTO) - Target: 4 hours
# Recovery Point Objective (RPO) - Target: 24 hours

# ========================================
# Testing & Validation
# ========================================

# Enable automated backup validation (recommended)
BACKUP_ENABLE_VALIDATION=true

# Backup verification frequency (in days)
BACKUP_VERIFICATION_INTERVAL=7
